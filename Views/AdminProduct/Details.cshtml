@model QuanLyKhachSan.Models.Phong
@{
    ViewBag.Title = "Chi tiết: " + Model.Name;
    Layout = "~/Views/Shared/_LayoutPage.cshtml";

    // Ép kiểu lại cho danh sách liên quan
    var related = ViewBag.Related as List<QuanLyKhachSan.Models.Phong>;
}

<style>
    :root {
        --navy-color: #0F2942;
        --gold-color: #C5A017;
        --gold-hover: #a68512;
        --bg-light: #f8f9fa;
    }

    /* Text Colors */
    .text-navy {
        color: var(--navy-color) !important;
    }

    .text-gold {
        color: var(--gold-color) !important;
    }

    /* Button Gold (Primary Action) */
    .btn-gold {
        background-color: var(--gold-color);
        color: white;
        border: none;
        font-weight: 600;
        transition: 0.3s;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }

        .btn-gold:hover {
            background-color: var(--gold-hover);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(197, 160, 23, 0.3);
        }

    /* Button Outline Navy (Secondary Action) */
    .btn-outline-navy {
        color: var(--navy-color);
        border: 1px solid var(--navy-color);
        background: transparent;
        font-weight: 600;
        transition: 0.3s;
    }

        .btn-outline-navy:hover {
            background-color: var(--navy-color);
            color: white;
        }

    /* Badge Category */
    .badge-category {
        background-color: #e9ecef;
        color: var(--navy-color);
        font-weight: 600;
        padding: 8px 15px;
        border-radius: 20px;
        font-size: 0.9rem;
        border: 1px solid #dee2e6;
    }

    /* Card Hover Effect */
    .related-card {
        transition: all 0.3s;
    }

        .related-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(15, 41, 66, 0.15) !important; /* Shadow Navy nhạt */
        }
</style>

<div class="container py-5">
    <div class="card shadow-sm p-4 border-0" style="background: white; border-radius: 8px;">
        <div class="row g-5 align-items-center">

            <div class="col-md-6 text-center">
                <div style="overflow: hidden; border-radius: 8px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); border: 1px solid #eee;">
                    <img src="@Url.Content(Model.ImageUrl)"
                         class="img-fluid"
                         alt="@Model.Name"
                         style="width: 100%; height: 450px; object-fit: cover; transition: transform 0.5s;"
                         onmouseover="this.style.transform='scale(1.1)'"
                         onmouseout="this.style.transform='scale(1)'" />
                </div>
            </div>

            <div class="col-md-6">
                <h2 class="fw-bold text-navy display-6 mb-3" style="font-family: 'Playfair Display', serif;">@Model.Name</h2>

                <div class="d-flex align-items-center mb-4">
                    <h3 class="me-3 mb-0">
                        <span class="fw-bold text-gold">@Model.Price.ToString("N0") đ</span>
                        <small class="text-muted fs-6 fw-normal">/ đêm</small>
                    </h3>

                    <span class="badge-category">
                        <i class="bi bi-bookmark-star-fill me-1 text-warning"></i>
                        @(Model.Loai != null ? Model.Loai.Name : "Phòng tiêu chuẩn")
                    </span>
                </div>

                <hr style="opacity: 0.1" />

                <div class="py-3">
                    <h5 class="fw-bold text-navy mb-3 text-uppercase small" style="letter-spacing: 1px;">Mô tả chi tiết</h5>
                    <div class="text-secondary" style="font-size: 1.05rem; line-height: 1.8;">
                        @Html.Raw(Model.Detail)
                    </div>

                    <div class="mt-4 d-flex gap-4 text-muted small">
                        <span><i class="bi bi-wifi fs-5 d-block mb-1 text-navy"></i>Wifi Free</span>
                        <span><i class="bi bi-tv fs-5 d-block mb-1 text-navy"></i>Smart TV</span>
                        <span><i class="bi bi-wind fs-5 d-block mb-1 text-navy"></i>AC 2 chiều</span>
                        <span><i class="bi bi-safe fs-5 d-block mb-1 text-navy"></i>Két sắt</span>
                    </div>
                </div>

                <div class="d-flex gap-3 mt-5">
                    <a href="javascript:void(0)"
                       class="btn btn-gold btn-lg px-4 shadow-sm btn-add-cart w-100"
                       data-id="@Model.ID">
                        <i class="bi bi-bag-plus-fill me-2"></i> ĐẶT PHÒNG NGAY
                    </a>

                    <a href="/SanPham/Index" class="btn btn-outline-navy btn-lg px-4">
                        <i class="bi bi-arrow-left"></i>
                    </a>
                </div>

                <p class="text-muted small mt-3 text-center fst-italic">
                    <i class="bi bi-check-circle me-1"></i> Xác nhận đặt phòng ngay lập tức. Thanh toán tại khách sạn.
                </p>
            </div>
        </div>
    </div>


    @if (related != null && related.Count > 0)
    {
        <div class="mt-5 pt-4">
            <h4 class="mb-4 fw-bold text-navy text-uppercase" style="border-left: 5px solid var(--gold-color); padding-left: 15px;">
                CÓ THỂ BẠN SẼ THÍCH
            </h4>

            <div class="row">
                @foreach (var item in related)
                {
                    <div class="col-md-3 col-6 mb-4">
                        <div class="card h-100 shadow-sm border-0 related-card" style="border-radius: 8px; overflow: hidden;">
                            <div style="position: relative; overflow: hidden;">
                                <a href="/SanPham/Details/@item.ID">
                                    <img src="@Url.Content(item.ImageUrl)"
                                         class="card-img-top"
                                         alt="@item.Name"
                                         style="height: 200px; object-fit: cover;" />
                                </a>
                                <span class="position-absolute bottom-0 end-0 bg-white px-3 py-1 m-2 rounded-pill shadow-sm fw-bold text-gold" style="font-size: 0.85rem;">
                                    @item.Price.ToString("#,##0") đ
                                </span>
                            </div>

                            <div class="card-body text-center p-3">
                                <h6 class="fw-bold text-truncate mb-2">
                                    <a href="/SanPham/Details/@item.ID" class="text-decoration-none text-navy">@item.Name</a>
                                </h6>

                                <small class="text-muted d-block mb-3">@(item.Loai != null ? item.Loai.Name : "Luxury Room")</small>

                                <a href="/SanPham/Details/@item.ID" class="btn btn-outline-navy btn-sm rounded-pill px-3 w-100">
                                    Xem chi tiết
                                </a>
                            </div>
                        </div>
                    </div>
                }
            </div>
        </div>
    }
</div>