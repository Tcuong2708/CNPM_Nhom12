@model QuanLyKhachSan.Models.HoaDon
@{
    Layout = null;
    int soDem = (Model.NgayTra - Model.NgayNhan).Days;

    if (soDem < 1)
    {
        soDem = 1;
    }
    decimal tongTienPhong = Model.CTHDs.Sum(x => x.DonGia * (x.SoLuong)) * soDem;

    decimal tongTienDichVu = Model.CT_DichVus != null ? Model.CT_DichVus.Sum(x => x.GiaTien) : 0;
}
<!DOCTYPE html>
<html>
<head>
    <title>Hóa Đơn #@Model.MaHD - MAY HOTEL</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background: #f5f5f5;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        .invoice-box {
            background: #fff;
            max-width: 800px;
            margin: 30px auto;
            padding: 40px;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
        }

        .theme-color {
            color: #0F2942;
        }
        /* Xanh Navy */
        .gold-color {
            color: #C5A017;
        }
        /* Vàng kim */

        /* CSS CHUYÊN DỤNG CHO MÁY IN */
        @@media print {
            .no-print {
                display: none !important;
            }

            .invoice-box {
                box-shadow: none;
                margin: 0;
                width: 100%;
                max-width: 100%;
                padding: 0;
            }

            body {
                background: #fff;
            }
        }
    </style>
</head>
<body>

    <div class="container mt-3 mb-3 no-print text-center">
        <button onclick="window.print()" class="btn btn-primary fw-bold px-4">
            <i class="bi bi-printer"></i> IN HÓA ĐƠN
        </button>
        <a href="/AdminOrder/Index" class="btn btn-secondary px-4">Quay lại</a>
    </div>

    <div class="invoice-box">
        <div class="row border-bottom pb-4 mb-4 align-items-center">
            <div class="col-8">
                <h2 class="fw-bold theme-color m-0">MAY HOTEL LUXURY</h2>
                <div class="small text-muted">CN1: 140 Lê Trọng Tấn, TP. HCM</div>
                <div class="small text-muted">CN2: 86 Tân Hòa Đông, Q.6, TP. HCM</div>
                <div class="small text-muted">Hotline: 1800 9327 | CSKH: 038 8305167 | Email: MayHotel.hotel@gmail.com</div>
            </div>
            <div class="col-4 text-end">
                <div class="fw-bold fs-4">HÓA ĐƠN GTGT</div>
                <div class="text-danger fw-bold">#HD-@Model.MaHD</div>
                <small>Ngày xuất: @DateTime.Now.ToString("dd/MM/yyyy HH:mm")</small>
            </div>
        </div>

        <div class="row mb-4">
            <div class="col-6">
                <h6 class="fw-bold theme-color text-uppercase">Khách hàng</h6>
                <div class="fw-bold">@Model.HoTen</div>
                <div>@Model.DienThoai</div>
                <div>@Model.DiaChi</div>
            </div>
            <div class="col-6 text-end">
                <h6 class="fw-bold theme-color text-uppercase">Thông tin lưu trú</h6>
                <div>Check-in: <b>@Model.NgayNhan.ToString("dd/MM/yyyy")</b></div>
                <div>Check-out: <b>@Model.NgayTra.ToString("dd/MM/yyyy")</b></div>
                <div class="text-primary fst-italic">(@soDem đêm)</div>
            </div>
        </div>

        <h6 class="fw-bold theme-color mt-4">I. TIỀN PHÒNG</h6>
        <table class="table table-bordered mb-0">
            <thead class="table-light">
                <tr>
                    <th>Tên phòng</th>
                    <th class="text-center">Số lượng</th>
                    <th class="text-center">Số đêm</th>
                    <th class="text-end">Đơn giá</th>
                    <th class="text-end">Thành tiền</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model.CTHDs)
                {
                    <tr>
                        <td>@item.Phong.Name</td>
                        <td class="text-center">@item.SoLuong</td>
                        <td class="text-center">@soDem</td>
                        <td class="text-end">@item.DonGia.ToString("#,##0")</td>
                        <td class="text-end fw-bold">@((item.DonGia * (item.SoLuong) * soDem).ToString("#,##0"))</td>
                    </tr>
                }
            </tbody>
        </table>
        <div class="text-end fw-bold pt-2 pe-2 mb-4">
            Cộng tiền phòng: @tongTienPhong.ToString("#,##0") đ
        </div>

        @if (Model.CT_DichVus != null && Model.CT_DichVus.Count > 0)
        {
            <h6 class="fw-bold theme-color">II. DỊCH VỤ SỬ DỤNG</h6>
            <table class="table table-bordered mb-0">
                <thead class="table-light">
                    <tr>
                        <th>Tên dịch vụ</th>
                        <th class="text-end">Đơn giá</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var dv in Model.CT_DichVus)
                    {
                        <tr>
                            <td>@dv.DichVu.TenDV</td>
                            <td class="text-end fw-bold">@dv.GiaTien.ToString("#,##0")</td>
                        </tr>
                    }
                </tbody>
            </table>
            <div class="text-end fw-bold pt-2 pe-2 mb-4">
                Cộng dịch vụ: @tongTienDichVu.ToString("#,##0") đ
            </div>
        }

        <div class="row mt-4 pt-3 border-top">
            <div class="col-6">
                <p class="fst-italic text-muted small">Cảm ơn quý khách đã sử dụng dịch vụ!</p>
            </div>
            <div class="col-6 text-end">
                <h4 class="fw-bold theme-color">TỔNG THANH TOÁN</h4>
                <h2 class="fw-bold gold-color">@Model.TongTien.ToString("#,##0") đ</h2>
            </div>
        </div>

        <div class="row mt-5 text-center">
            <div class="col-6">
                <b>Khách hàng</b><br>
                <small>(Ký, ghi rõ họ tên)</small>
            </div>
            <div class="col-6">
                <b>Nhân viên thu ngân</b><br>
                <small>(Ký, đóng dấu)</small>
            </div>
        </div>
    </div>
</body>
</html>